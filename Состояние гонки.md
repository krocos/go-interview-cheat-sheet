**Race Condition (состояние гонки)** в Go — это ошибка, возникающая, когда несколько горутин (goroutines) одновременно обращаются к общим данным, и **хотя бы одна из них выполняет запись**, без должной синхронизации. Это может привести к непредсказуемым результатам, повреждению данных или панике.
# Как поймать?
Пишем тесты, и запускаем их с флагом `-race` (в этом случае рантайм будет в случайном порядке переключаться между горутинами (если не ошибаюсь), и компилятор генерирует дополнительный код, который "журналирует" обращения к памяти). Этот флаг можно использовать как для `go test`, так и для `go run` или `go build`.

Детектор гонки основан на библиотеке времени выполнения (runtime library) C/C++ ThreadSanitizer.

Так же предпочитаю писать тесты, провоцирующие гонку. Код в этом случае будет работать значительно медленнее, но для этапа тестирования это и не так важно. А именно для тестируемой структуры запускаю (например) 100 горутин которые читают и пишут что-то в случайном порядке.

Важно и ещё одно высказывание — **"Если race detector обнаруживает состояние гонки, то оно у вас наверняка есть; если же не обнаруживает — то это не означает что его нет"**.