- Срез — всегда указатель на массив, массив — значение
- Срез может менять свой размер и динамически аллоцировать память
# Массивы
Ёмкость массива объявляется в момент его создания, и после изменить её уже нельзя (его длина это часть его типа).

Кстати, массивы с элементами одного типа но с разными размерами являются разными типами.

Массивы не нужно инициализировать явно.
```go
var a [4]int // [0 0 0 0]
```
# Слайсы
А слайс же это своего рода версия массива но с вариативным размером (структура данных, которая строится поверх массива и предоставляет доступ к элементами базового массива).
```go
type slice struct {
    array unsafe.Pointer // указатель на массив
    len   int            // длина (length)
    cap   int            // вместимость (capacity)
}
```
Слайсы до 64 KB могут быть размещены на стеке.

Аллокация слайса:
```go
var (
    a = []int{}            // []              len=0 cap=0
    b = []int{1, 2}        // [1 2]           len=2 cap=2
    c = []int{5: 123}      // [0 0 0 0 0 123] len=6 cap=6
    d = make([]int, 5, 10) // [0 0 0 0 0]     len=5 cap=10
)
```
**Capacity** означает ёмкость и помогает зарезервировать место в памяти на будущее, чтобы избежать лишних операций выделения памяти при росте слайса (это ключевой параметр для аллокации памяти, влияет на производительность вставки в срез). При добавлении новых элементов в слайс новый массив для него не будет создаваться до тех пор, пока cap меньше len.

Слайсы передаются "по ссылке" (фактически будет передана копия структуры slice со своими len и cap, но указатель на массив array будет тот-же самый). Для защиты слайса от изменений следует передавать его копию:
```go
var (
    a = []int{1, 2, 0, 0, 1}
    b = make([]int, len(a))
)

copy(b, a)

fmt.Println(a, b) // [1 2 0 0 1] [1 2 0 0 1]
```
Слайс из массива можно сделать так:
```go
var _ = arr[:]
```
## Как работает append в слайсе?
`append()` сравнивает значения len и cap у слайса. Если `len` меньше чем `cap`, то значение `len` увеличивается, а само добавляемое значение помещается в конец слайса.

Увеличении размера слайса (метод `growslice()`) происходит по следующему алгоритму — если его размер менее 1024 элементов, то его размер будет увеличиваться вдвое; иначе же слайс увеличивается на `~12.5%` от своего текущего размера.

Что важно помнить — если на основании слайса `one` выделить подслайс `two`, а затем увеличим слайс `one` (и его вместимость будет превышена) — то `one` и `two` будут уже ссылаться на разные участки памяти!
## Примеры работы со слайсами
[Go Wiki: SliceTricks](https://go.dev/wiki/SliceTricks)